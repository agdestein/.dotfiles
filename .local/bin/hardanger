#!/usr/bin/env fish
set theme (echo -e "catppuccin\ngruvbox\ndracula\nmonokai\nnord" | rofi -dmenu -i)

if test $theme = "catppuccin"
    alacritty-themes Catppuccin
    sed -i 's/0x1E1D2F/0x1E1E2E/g' ~/.config/alacritty/alacritty.yml
    set color_bat "base16-256"
    # set doom_theme "doom-catppuccin"
    set doom_theme "doom-gruvbox"
    set gtk_theme_name "Catppuccin-pink"
    set gtk_icon_theme_name "Adwaita"
    set gtk_cursor_theme_name "Breeze_Snow"
    set wallpaper "landscapes\/cat_mountains.png"
    set vscode "Catppuccin"
    set bpytop "default"
    set btop "Catppuccin"
    set ohmyrepl "JuliaDefault"
else if test $theme = "dracula"
    alacritty-themes Dracula
    sed -i 's/#000000/#282a36/g' ~/.config/alacritty/alacritty.yml
    set color_bat "Dracula"
    set doom_theme "doom-dracula"
    set gtk_theme_name "Dracula"
    set gtk_icon_theme_name "Dracula"
    set gtk_cursor_theme_name "Breeze_Snow"
    set wallpaper "nordlys4.jpg"
    set vscode "Dracula"
    set bpytop "dracula"
    set btop "dracula"
    set ohmyrepl "JuliaDefault"
else if test $theme = "gruvbox"
    alacritty-themes Gruvbox-Dark
    set color_bat "gruvbox-dark"
    set doom_theme "doom-gruvbox"
    set gtk_theme_name "gruvbox-dark-gtk"
    set gtk_icon_theme_name "Gruvbox-Material-Dark"
    set gtk_cursor_theme_name "Breeze"
    set wallpaper "hardanger_crop.jpg"
    # set vscode "Gruvbox Dark Medium"
    set vscode "Gruvbox Material Dark"
    set bpytop "gruvbox_dark_v2"
    set btop "gruvbox_dark_v2"
    set ohmyrepl "GruvboxDark"
else if test $theme = "monokai"
    alacritty-themes Monokai.dark
    # sed -i 's/#000000/#282a36/g' ~/.config/alacritty/alacritty.yml
    set color_bat "Monokai Extended"
    set doom_theme "doom-monokai-classic"
    set gtk_theme_name "monokai-gtk"
    set gtk_icon_theme_name "monokai-gtk"
    set gtk_cursor_theme_name "Breeze_Snow"
    set wallpaper "beams.png"
    set vscode "Julia (Monokai Classic)"
    set bpytop "monokai"
    set btop "monokai"
    set ohmyrepl "Monokai24bit"
else if test $theme = "nord"
    alacritty-themes Nord
    # sed -i 's/#000000/#282a36/g' ~/.config/alacritty/alacritty.yml
    set color_bat "Nord"
    set doom_theme "doom-nord"
    set gtk_theme_name "Nordic"
    set gtk_icon_theme_name "Nordic"
    set gtk_cursor_theme_name "Breeze_Snow"
    set wallpaper "fjell.jpg"
    set vscode "Nord"
    set bpytop "nord"
    set btop "nord"
    set ohmyrepl "JuliaDefault"
else
    exit
end

ln -sf ~/.config/leftwm/themes/Hardanger/colors/$theme.toml ~/.config/leftwm/themes/Hardanger/theme.toml
ln -sf ~/.config/nvim/lua/colorloaders/$theme.lua ~/.config/nvim/lua/colorloaders/colors.lua
ln -sf ~/.config/leftwm/themes/Hardanger/polybar/colors/$theme.ini ~/.config/leftwm/themes/Hardanger/polybar/colors/colors.ini
ln -sf ~/.config/kitty/themes/$theme.conf ~/.config/kitty/current-theme.conf
ln -sf ~/.config/vimb/themes/$theme.css ~/.config/vimb/style.css
sed -i 's/^(setq doom-theme \'.*/(setq doom-theme \''(echo $doom_theme)')/g' ~/.config/doom/config.el
sed -i 's/^--theme=.*/--theme="'(echo $color_bat)'"/g' ~/.config/bat/config 
sed -i 's/^gtk-theme-name=.*/gtk-theme-name='(echo $gtk_theme_name)'/g' ~/.config/gtk-3.0/settings.ini
sed -i 's/^gtk-icon-theme-name=.*/gtk-icon-theme-name='(echo $gtk_icon_theme_name)'/g' ~/.config/gtk-3.0/settings.ini
sed -i 's/^gtk-cursor-theme-name=.*/gtk-cursor-theme-name='(echo $gtk_cursor_theme_name)'/g' ~/.config/gtk-3.0/settings.ini
sed -i 's/^\@import.*/@import "'(echo $theme)'.rasi"/g' ~/.config/rofi/config.rasi
sed -i 's/^$dir\/.*/$dir\/'(echo $theme)'.sh/g' ~/.config/rofi/launchers/colorful/launcher.sh
sed -i -e 's/@import .*/@import "~\/.config\/rofi\/powermenu\/styles\/'(echo $theme)'.rasi"/g' ~/.config/rofi/powermenu/styles/colors.rasi
sed -i 's/^dirs=.*/dirs=\/home\/syver\/Pictures\/wallpapers\/'(echo $theme)';/g' ~/.config/nitrogen/nitrogen.cfg
sed -i 's/^file=.*/file=\/home\/syver\/Pictures\/wallpapers\/'(echo $theme)'\/'(echo $wallpaper)'/g' ~/.config/nitrogen/bg-saved.cfg
sed -i 's/"workbench\.colorTheme": ".*",/"workbench\.colorTheme": "'(echo $vscode)'",/g' ~/.config/Code/User/settings.json
sed -i -e 's/color_theme=.*/color_theme="'(echo $bpytop)'"/g' ~/.config/bpytop/bpytop.conf 
sed -i -e 's/color_theme = .*/color_theme = "\/usr\/share\/btop\/themes\/'(echo $btop)'.theme"/g' ~/.config/btop/btop.conf 
sed -i 's/^colorscheme!(".*/colorscheme!("'(echo $ohmyrepl)'")/g' ~/.julia/config/startup.jl

sed -i -e '/## BEGIN THEME/,/## END THEME/{/^##/!d}' -e '/## BEGIN THEME.*$/r /home/syver/.config/vimb/themes/'(echo $theme) ~/.config/vimb/config
sed -i -e '/## BEGIN THEME/,/## END THEME/{/^##/!d}' -e '/## BEGIN THEME.*$/r /home/syver/.config/dunst/themes/'(echo $theme) ~/.config/dunst/dunstrc
sed -i -e '/## BEGIN THEME/,/## END THEME/{/^##/!d}' -e '/## BEGIN THEME.*$/r /home/syver/.config/zathura/themes/'(echo $theme) ~/.config/zathura/zathurarc
sed -i -e '/;; BEGIN THEME/,/;; END THEME/{/^;;/!d}' -e '/;; BEGIN THEME.*$/r /home/syver/delta_themes/'(echo $theme) ~/.gitconfig

leftwm-command "SoftReload"
